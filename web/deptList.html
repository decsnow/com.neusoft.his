<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="static/js/jquery-3.3.1.min.js"></script>
    <link href="static/css/list.css" rel="stylesheet">
</head>
<body>
<form class="form-inline" accept-charset="UTF-8" onsubmit="return false">
    <div class="form-group">
        <label for="deptName">科室</label>
        <input type="text" class="form-control" name="deptName" id="deptName" placeholder="请输入科室名">
    </div>
    <button type="submit" class="btn btn-primary" onclick="loadList()">搜索</button>
</form>
<table style="margin: 20px">
    <thead>
    <tr>
        <td>编号</td>
        <td>代码</td>
        <td>科室</td>
        <td>分类</td>
    </tr>
    </thead>
    <tbody id="dataList">

    </tbody>
</table>
<script>
    //页面加载的时候执行
    $(function (){
        loadList();
    })
    function loadList(){
        let deptName = $("#deptName").val();
        $.ajax({
            url:"/medical_war_exploded/department?action=listDept",
            type:"post",
            data:{"deptName":deptName},
            success:function (data){
                //拿到的是json字符串，要转换成json对象
                let dataList = JSON.parse(data);
                console.log(dataList);
                let dataStr = "";
                for (let i = 0; i < dataList.length; i++) {
                    dataStr += "<tr><td>"+dataList[i].id + "</td>" +
                    "<td>" + dataList[i].dept_code + "</td>" +
                    "<td>" + dataList[i].dept_name + "</td>";
                    if(dataList[i].dept_type!=null && dataList[i].dept_type.length>0){
                        dataStr +="<td>"+dataList[i].dept_type +"</td></tr>";
                    }else{
                        dataStr +="<td>---</td></tr>";
                    }
                }
                $("#dataList").html(dataStr);
            }
        })
    }
</script>
</body>
</html>